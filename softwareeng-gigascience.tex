%% BioMed_Central_Tex_Template_v1.06
%%                                      %
%  bmc_article.tex            ver: 1.06 %
%                                       %

%%IMPORTANT: do not delete the first line of this template
%%It must be present to enable the BMC Submission system to
%%recognise this template!!

%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
%%                                     %%
%%  LaTeX template for BioMed Central  %%
%%     journal article submissions     %%
%%                                     %%
%%          <8 June 2012>              %%
%%                                     %%
%%                                     %%
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%


%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
%%                                                                 %%
%% For instructions on how to fill out this Tex template           %%
%% document please refer to Readme.html and the instructions for   %%
%% authors page on the biomed central website                      %%
%% http://www.biomedcentral.com/info/authors/                      %%
%%                                                                 %%
%% Please do not use \input{...} to include other tex files.       %%
%% Submit your LaTeX manuscript as one .tex document.              %%
%%                                                                 %%
%% All additional figures and files should be attached             %%
%% separately and not embedded in the \TeX\ document itself.       %%
%%                                                                 %%
%% BioMed Central currently use the MikTex distribution of         %%
%% TeX for Windows) of TeX and LaTeX.  This is available from      %%
%% http://www.miktex.org                                           %%
%%                                                                 %%
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%

%%% additional documentclass options:
%  [doublespacing]
%  [linenumbers]   - put the line numbers on margins

%%% loading packages, author definitions

%\documentclass[twocolumn]{bmcart}% uncomment this for twocolumn layout and comment line below
\documentclass{bmcart}

%%% Load packages
%\usepackage{amsthm,amsmath}
%\RequirePackage{natbib}
%\RequirePackage{hyperref}
\usepackage[utf8]{inputenc} %unicode support
%\usepackage[applemac]{inputenc} %applemac support if unicode package fails
%\usepackage[latin1]{inputenc} %UNIX support if unicode package fails
\usepackage{graphicx}

%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
%%                                             %%
%%  If you wish to display your graphics for   %%
%%  your own use using includegraphic or       %%
%%  includegraphics, then comment out the      %%
%%  following two lines of code.               %%
%%  NB: These line *must* be included when     %%
%%  submitting to BMC.                         %%
%%  All figure files must be submitted as      %%
%%  separate graphics through the BMC          %%
%%  submission process, not included in the    %%
%%  submitted article.                         %%
%%                                             %%
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%


%\def\includegraphic{}
%\def\includegraphics{}



%%% Put your definitions there:
\startlocaldefs
\endlocaldefs


%%% Begin ...
\begin{document}

%%% Start of article front matter
\begin{frontmatter}

\begin{fmbox}
\dochead{Commentary}

%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
%%                                          %%
%% Enter the title of your article here     %%
%%                                          %%
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%

\title{Ten recommendations for software engineering in research}

%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
%%                                          %%
%% Enter the authors here                   %%
%%                                          %%
%% Specify information, if available,       %%
%% in the form:                             %%
%%   <key>={<id1>,<id2>}                    %%
%%   <key>=                                 %%
%% Comment or delete the keys which are     %%
%% not used. Repeat \author command as much %%
%% as required.                             %%
%%                                          %%
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%

\author[
   addressref={aff1},                   % id's of addresses, e.g. {aff1,aff2}
   corref={aff1},                       % id of corresponding address, if any
   email={hastings@ebi.ac.uk}   % email address
]{\inits{JH}\fnm{Janna} \snm{Hastings}}
\author[
   addressref={aff1},
   email={kenneth@ebi.ac.uk}
]{\inits{KH}\fnm{Kenneth} \snm{Haug}}
\author[
   addressref={aff1},
   email={steinbeck@ebi.ac.uk}
]{\inits{CS}\fnm{Christoph} \snm{Steinbeck}}

%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
%%                                          %%
%% Enter the authors' addresses here        %%
%%                                          %%
%% Repeat \address commands as much as      %%
%% required.                                %%
%%                                          %%
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%

\address[id=aff1]{%                           % unique id
  \orgname{Cheminformatics and Metabolism, European Molecular Biology Laboratory -- European Bioinformatics Institute}, % university, etc
  \street{Wellcome Trust Genome Campus},                     %
  %\postcode{}                                % post or zip code
  \city{Hinxton},                              % city
  \cny{UK}                                    % country
}

%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
%%                                          %%
%% Enter short notes here                   %%
%%                                          %%
%% Short notes will be after addresses      %%
%% on first page.                           %%
%%                                          %%
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%

\begin{artnotes}
%\note{Sample of title note}     % note to the article
%\note[id=n1]{Equal contributor} % note, connected to author
\end{artnotes}

\end{fmbox}% comment this for two column layout

%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
%%                                          %%
%% The Abstract begins here                 %%
%%                                          %%
%% Please refer to the Instructions for     %%
%% authors on http://www.biomedcentral.com  %%
%% and include the section headings         %%
%% accordingly for your article type.       %%
%%                                          %%
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%

\begin{abstractbox}

\begin{abstract} % abstract
%\parttitle{First part title} %if any
Research in the expanding context of data-driven science requires a backbone of well-operating software. But scientific researchers are typically not trained at length in software engineering. In this commentary we give ten recommendations that researchers can follow when creating software applications, to ensure the usability, sustainability and practicality of their codebases. 

%\parttitle{Second part title} %if any
%Text for this section.
\end{abstract}

%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
%%                                          %%
%% The keywords begin here                  %%
%%                                          %%
%% Put each keyword in separate \kwd{}.     %%
%%                                          %%
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%

\begin{keyword}
\kwd{software engineering}
\kwd{best practices}
\end{keyword}

% MSC classifications codes, if any
%\begin{keyword}[class=AMS]
%\kwd[Primary ]{}
%\kwd{}
%\kwd[; secondary ]{}
%\end{keyword}

\end{abstractbox}
%
%\end{fmbox}% uncomment this for twcolumn layout

\end{frontmatter}

%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
%%                                          %%
%% The Main Body begins here                %%
%%                                          %%
%% Please refer to the instructions for     %%
%% authors on:                              %%
%% http://www.biomedcentral.com/info/authors%%
%% and include the section headings         %%
%% accordingly for your article type.       %%
%%                                          %%
%% See the Results and Discussion section   %%
%% for details on how to create sub-sections%%
%%                                          %%
%% use \cite{...} to cite references        %%
%%  \cite{koon} and                         %%
%%  \cite{oreg,khar,zvai,xjon,schn,pond}    %%
%%  \nocite{smith,marg,hunn,advi,koha,mouse}%%
%%                                          %%
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%

%%%%%%%%%%%%%%%%%%%%%%%%% start of article main body
% <put your article body there>

%%%%%%%%%%%%%%%%
%% Background %%
%%
\section*{Background}

Scientific research increasingly requires larger and larger datasets in which to investigate hypotheses. Analysing and interpreting these data is not possible without computational tools \cite{goble2014}, and as the frontier of science evolves, new tools need to be written. However, scientists might not have received deep training in software engineering. Their code can risk being difficult and costly to maintain and re-use. 

To address this challenge, we have compiled ten software engineering recommendations that aim to improve the software output of any researcher. 

\section*{Recommendations}

\subsection*{1. Keep It Simple}

Every software project starts somewhere. A rule of thumb is to \textit{start as simply as you possibly can}. Significantly more problems are created by over-engineering than under-engineering. So do the simplest thing that could possibly work, and then double-check it really does work. 

A clean data model leads naturally to efficient algorithms. Elegance in data model is a kind of simplicity; strive for it. 

\subsection*{2. Don't Repeat Yourself}

Don't be tempted to use the copy-paste-modify coding technique when you encounter similar requirements. Even though this \textit{appears} the simplest approach, it won't remain simple, because important lines of code will end up duplicated. When making changes, you'll have to do them twice, taking twice as long. You may forget an obscure place to which you copied that code, leaving a bug. 

Consider writing a library with a generic method that you can call from anywhere.  

\subsection*{3. Use A Modular Design}

Modules act as building blocks that can be glued together to achieve overall system functionality. They hide the details of their implementation behind a public interface, and can thus be internally modified without impacting modules that use them. They should be interrelated with just a few, well-tested methods. 

Scrutinise modules and libraries that already exist for the functionality you need. Don't rewrite what you can profitably re-use.   

\subsection*{4. Test, Test, Test}

For objectivity, large software development efforts assign different people to test software than develop it. This is a luxury not available in most research labs, but there are robust testing strategies available to even the smallest project. 

You can write software tests which are executed automatically on a regular basis -- unit tests. Such tests can serve as a specification, checking every aspect of the intended functionality as it is developed \cite{tdd}. Make sure the unit tests exhaustively simulate \textit{all possible} -- not only that which seems reasonable -- inputs to each method. 

A valuable hands-on testing resource may be your users.  

\subsection*{5. Involve Your Users}

Users know what they need software to do. Let them try the software as early as possible, and make it easy for them to give feedback, via a mailing list or an issue tracker. In an open source software development paradigm, your users can become co-developers. In closed-source and commercial paradigms, you can offer early-access beta releases to a trusted group.  

Many sophisticated methods have been developed for user experience analysis. For example, you could hold an interactive workshop \cite{pavelin2014}. 

But beware: sometimes, users ask for too much. 

\subsection*{6. Resist Gold Plating}

Learn to tell the difference between essential features and the long list of wishes users may have. Prioritise aggressively and with as broad a collection of stakeholders as possible, perhaps using ``game-storming'' techniques \cite{gamestorm}.   

Gold plating is a challenge in all phases of development, not only in the early stages of requirements analysis. In its most mischievous disguise it appears as slow scope creep where just a little something is added in every iterative project meeting. Those little somethings add up. 

\subsection*{7. Document Everything}

Comprehensive documentation helps other developers who may take over your code, and also helps the future you. Use code comments for in-line documentation, especially for any technically challenging blocks, and public interface methods. But there is no need for comments that mirror the exact detail of code line-by-line. 

It is better to have two or three lines of code that are easy to understand than to have one incomprehensible line (e.g. Figure~\ref{fig-incomprehensible})\footnote{For a guide to incomprehensible code generation, see https://www.thc.org/root/phun/unmaintain.html}. 

\begin{figure}%
\includegraphics[width=\columnwidth]{code-snippet.png}%
\caption{An example of incomprehensible code: What does this code actually do?}%
\label{fig-incomprehensible}%
\end{figure}

Write clean code \cite{cleancode} that \textit{you} would \textit{want} to maintain long-term. Meaningful, readable variable names are another form of documentation. 

Write an easily accessible module guide for each module, explaining the higher level view: what is the purpose of this module, how it fits together with other modules, and how to get started using it. 

\subsection*{8. Avoid Spaghetti}

Since GOTO-like commands fell out of favour several decades ago, you might have the impression that spaghetti code is a thing of the past. Unfortunately, spaghetti code is alive and well. It now hides in inter-method and inter-module relationships (see Figure~\ref{fig-spaghetti}). Debugging -- stepping through your code as it executes line by line -- can help you diagnose modern-day spaghetti code. Beware module designs where for every unit of functionality you have to step through several different modules to discover where the error is, and along the way you've long lost the record of what the original method was actually doing or what the erroneous input was. 

\begin{figure}%
\includegraphics[width=\columnwidth]{ComplexClassDiagram.png}%
\caption{An unhealthy module design for `biotool` with multiple interdependencies between different packages. An addition of functionality to the system (such as supporting a new field) requires updating the software in many different places.}%
\label{fig-spaghetti}%
\end{figure}

\subsection*{9. Optimise Last}

Beware optimising too early. Although research applications are often performance-critical, until you truly encounter the wide range of inputs that your software will eventually run against in the production environment, it may not be possible to anticipate where the real bottlenecks will lie. Develop the correct functionality first, deploy it and then continuously improve it using repeat evaluation of the system running time as a guide (while your unit tests keep checking that the system is doing what it should). 

\subsection*{10. Evolution, Not Revolution}

Maintenance becomes tougher as a system gets older. Take time on a regular basis to revisit the codebase. Can it be renovated and improved \cite{refactoring}? Use a good version control system (e.g. Git\footnote{http://git-scm.com/}) and proceed with caution -- tackling one module at a time. Don't be afraid to revert your changes. 

But avoid the urge to rewrite an entire system from the beginning unless it is really the only option or the system is very small. Be pragmatic \cite{pragprog} -- you may never finish the rewrite. This is especially true for systems that were written without following the preceding recommendations. 

\section*{Conclusion}

Software engineering for research poses novel challenges. One such is that the research context can encourage a rapid turnover of staff, with the result that knowledge about legacy systems is lost. There is a shortage of software engineering-specific training. And ``publish or perish'' culture may incentivise taking shortcuts. If these recommendations are followed, it may go some way towards mitigating these negative influences. 


%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
%%                                          %%
%% Backmatter begins here                   %%
%%                                          %%
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%

\begin{backmatter}

\section*{Competing interests}
  The authors declare that they have no competing interests.

\section*{Author's contributions}
    JH prepared the initial draft. All authors contributed to, and have read and approved, the final version. 

\section*{Acknowledgements}
  This commentary is based on a presentation given by JH at a workshop on Software Engineering held at the 2014 annual Metabolomics conference in Tsuruoka, Japan. The authors would like to thank Saravanan Dayalan for organising the workshop. 
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
%%                  The Bibliography                       %%
%%                                                         %%
%%  Bmc_mathpys.bst  will be used to                       %%
%%  create a .BBL file for submission.                     %%
%%  After submission of the .TEX file,                     %%
%%  you will be prompted to submit your .BBL file.         %%
%%                                                         %%
%%                                                         %%
%%  Note that the displayed Bibliography will not          %%
%%  necessarily be rendered by Latex exactly as specified  %%
%%  in the online Instructions for Authors.                %%
%%                                                         %%
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%

% if your bibliography is in bibtex format, use those commands:
\bibliographystyle{bmc-mathphys} % Style BST file
\bibliography{bmc_article}      % Bibliography file (usually '*.bib' )

% or include bibliography directly:
% \begin{thebibliography}
% \bibitem{b1}
% \end{thebibliography}

%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
%%                               %%
%% Figures                       %%
%%                               %%
%% NB: this is for captions and  %%
%% Titles. All graphics must be  %%
%% submitted separately and NOT  %%
%% included in the Tex document  %%
%%                               %%
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%

%%
%% Do not use \listoffigures as most will included as separate files

%\section*{Figures}
%  \begin{figure}[h!]
%  \caption{\csentence{Sample figure title.}
%      A short description of the figure content
%      should go here.}
%      \end{figure}

%\begin{figure}[h!]
%  \caption{\csentence{Sample figure title.}
%      Figure legend text.}
%      \end{figure}

%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
%%                               %%
%% Tables                        %%
%%                               %%
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%

%% Use of \listoftables is discouraged.
%%
%\section*{Tables}
%\begin{table}[h!]
%\caption{Sample table title. This is where the description of the table should go.}
%      \begin{tabular}{cccc}
%        \hline
%           & B1  &B2   & B3\\ \hline
%        A1 & 0.1 & 0.2 & 0.3\\
%        A2 & ... & ..  & .\\
%        A3 & ..  & .   & .\\ \hline
%      \end{tabular}
%\end{table}

%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
%%                               %%
%% Additional Files              %%
%%                               %%
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%

%\section*{Additional Files}
%  \subsection*{Additional file 1 --- Sample additional file title}
%    Additional file descriptions text (including details of how to
%    view the file, if it is in a non-standard format or the file extension).  This might
%    refer to a multi-page table or a figure.

  %\subsection*{Additional file 2 --- Sample additional file title}
   % Additional file descriptions text.


\end{backmatter}
\end{document}
